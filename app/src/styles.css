/* ========== Base & Theme Tokens ========== */
:root {
  --font: ui-sans-serif, system-ui, "Segoe UI", Tahoma, Arial, "Noto Sans Arabic", sans-serif;

  /* Color system */
  --primary: #3b82f6;
  --secondary: #22c55e;

  --bg: #0b1220;
  --surface: #0f1a30;
  --surface-2: #132042;
  --text: #e8eefc;
  --muted: #a9b6d3;
  --outline: rgba(255, 255, 255, 0.14);

  --shadow: 0 10px 30px rgba(0,0,0,0.22);
  --radius: 16px;
  --radius-sm: 12px;

  --focus: 0 0 0 3px rgba(59,130,246,0.35);
}

:root[data-theme="light"]{
  --bg: #f6f7fb;
  --surface: #ffffff;
  --surface-2: #f1f5ff;
  --text: #0f172a;
  --muted: #475569;
  --outline: rgba(15,23,42,0.12);
  --shadow: 0 10px 30px rgba(2,6,23,0.08);
}

* { box-sizing: border-box; }
html, body { height: 100%; }

body{
  margin: 0;
  font-family: var(--font);
  background: var(--bg);
  color: var(--text);
}

a { color: inherit; text-decoration: none; }
button, input { font-family: inherit; }

/* ========== Layout Container ========== */
.container{
  max-width: 1100px;
  margin: 0 auto;
  padding: 16px;
}

/* ✅ على الشاشات الكبيرة وسّع العرض شوي */
@media (min-width: 1100px){
  .container{
    max-width: 1320px;
  }
}


/* ========== App Shell ========== */
.topbar{
  position: sticky;
  top: 0;
  z-index: 30;
  backdrop-filter: blur(10px);
  background: color-mix(in srgb, var(--bg) 75%, transparent);
  border-bottom: 1px solid var(--outline);
}

.topbar-inner{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  padding: 12px 16px;
}

.brand{
  display:flex;
  align-items:center;
  gap: 10px;
  font-weight: 800;
  letter-spacing: 0.2px;
}

.brand-badge{
  width: 38px;
  height: 38px;
  border-radius: 12px;
  display:grid;
  place-items:center;
  background: color-mix(in srgb, var(--primary) 25%, var(--surface));
  border: 1px solid var(--outline);
  box-shadow: var(--shadow);
}

.toolbar{
  display:flex;
  align-items:center;
  gap: 10px;
}

/* ========== Buttons ========== */
.btn{
  border: 1px solid var(--outline);
  background: var(--surface);
  color: var(--text);
  padding: 10px 12px;
  border-radius: 14px;
  cursor: pointer;
  transition: transform 0.05s ease, background 0.2s ease, border-color 0.2s ease;
}

.btn:hover{ background: color-mix(in srgb, var(--surface) 78%, var(--primary) 22%); }
.btn:active{ transform: translateY(1px); }
.btn:focus{ outline: none; box-shadow: var(--focus); }

.btn-primary{
  background: color-mix(in srgb, var(--primary) 24%, var(--surface));
  border-color: color-mix(in srgb, var(--primary) 40%, var(--outline));
}

.btn-danger{
  background: color-mix(in srgb, #ef4444 16%, var(--surface));
  border-color: color-mix(in srgb, #ef4444 35%, var(--outline));
}

/* ========== Cards / Lists ========== */
.card{
  background: var(--surface);
  border: 1px solid var(--outline);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow: hidden;
}

.card-body{ padding: 16px; }

.card-title{
  font-size: 18px;
  font-weight: 800;
  margin: 0 0 8px;
}

.card-sub{
  color: var(--muted);
  margin: 0;
}

.grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
}

@media (max-width: 900px){
  .grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

@media (max-width: 560px){
  .grid{ grid-template-columns: 1fr; }
}

.item{
  padding: 14px;
  border-radius: 16px;
  border: 1px solid var(--outline);
  background: color-mix(in srgb, var(--surface) 92%, var(--surface-2));
  cursor:pointer;
}

.item:hover{
  background: color-mix(in srgb, var(--surface) 78%, var(--primary) 22%);
}

.item h3{
  margin: 0 0 6px;
  font-size: 16px;
}

.item p{
  margin: 0;
  color: var(--muted);
  font-size: 13px;
}

/* ========== Breadcrumb ========== */
.breadcrumb{
  display:flex;
  flex-wrap: wrap;
  gap: 6px;
  align-items:center;
  margin: 14px 0;
  color: var(--muted);
}

.crumb{
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--outline);
  background: color-mix(in srgb, var(--surface) 90%, transparent);
}

.crumb a { color: var(--text); }
.sep{ opacity: 0.6; }

/* ========== Lock Screen ========== */
.lock-wrap{
  display:grid;
  place-items:center;
  min-height: calc(100vh - 70px);
}

.lock-card{
  width: min(520px, 100%);
}

.field{
  display:flex;
  flex-direction:column;
  gap: 8px;
  margin-top: 12px;
}

.label{ color: var(--muted); font-size: 13px; }

.input{
  width:100%;
  padding: 12px 12px;
  border-radius: 14px;
  border: 1px solid var(--outline);
  background: var(--surface-2);
  color: var(--text);
}

.input:focus{ outline:none; box-shadow: var(--focus); }
.hint{ color: var(--muted); font-size: 13px; margin-top: 8px; }

/* ========== Reader Layout ========== */
.reader{
  /* UI عربي */
  direction: rtl;
  text-align: right;

  display:grid;
  grid-template-columns: 1.6fr 0.9fr;
  gap: 12px;
}

@media (max-width: 900px){
  .reader{ grid-template-columns: 1fr; gap: 14px; }
}

.question-box{
  border-radius: var(--radius);
  border: 1px solid var(--outline);
  background: var(--surface);
  box-shadow: var(--shadow);
  padding: 16px;
}

.q-meta{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap: 10px;
  margin-bottom: 12px;
  color: var(--muted);
  font-size: 13px;
}

/* السؤال/الخيارات/الشرح إنكليزي داخل الصندوق */
.q-text{
  direction: ltr;
  text-align: left;
  unicode-bidi: plaintext;

  line-height: 1.55;
  font-size: 16px;

  padding: 12px;
  border-radius: 14px;
  border: 1px solid var(--outline);
  background: color-mix(in srgb, var(--surface) 84%, var(--surface-2));
}

/* ========== Options (Clickable) ========== */
.options{
  /* خليها grid حتى تكون ثابتة ومرتبة */
  display: grid;
  gap: 12px;
  margin-top: 12px;

  direction: ltr;
  text-align: left;
  unicode-bidi: plaintext;
}

/* ملاحظة: .option الآن button */
.option{
  appearance: none;
  -webkit-appearance: none;

  width: 100%;
  cursor: pointer;

  border: 1px solid var(--outline);
  background: color-mix(in oklab, var(--surface) 92%, transparent);
  color: var(--text);

  padding: 14px 16px;
  border-radius: 16px;

  display: flex;
  gap: 12px;
  align-items: flex-start;

  text-align: left;

  transition: transform 120ms ease, border-color 120ms ease, background 120ms ease;
}

.option:hover { transform: translateY(-1px); }
.option:active { transform: translateY(0px); }
.option:focus{ outline: none; box-shadow: var(--focus); }

.option strong{
  min-width: 28px;
  font-weight: 800;
}

.option:disabled{
  cursor: default;
  opacity: 0.98;
}

/* selected (قبل الحكم) */
.option.selected{
  border-color: color-mix(in oklab, var(--primary) 70%, var(--outline));
  background: color-mix(in oklab, var(--primary) 12%, var(--surface));
}

/* correct */
.option.correct{
  border-color: color-mix(in oklab, #22c55e 70%, var(--outline));
  background: color-mix(in oklab, #22c55e 14%, var(--surface));
}

/* wrong */
.option.wrong{
  border-color: color-mix(in oklab, #ef4444 70%, var(--outline));
  background: color-mix(in oklab, #ef4444 12%, var(--surface));
}

/* ========== Answer Box ========== */
.answer{
  margin-top: 12px;
  border-radius: 14px;
  padding: 12px;
  border: 1px solid var(--outline);
  background: color-mix(in srgb, var(--primary) 10%, var(--surface));

  /* الشرح عادة إنكليزي */
  direction: ltr;
  text-align: left;
  unicode-bidi: plaintext;
}

.answer-title{
  margin: 0 0 6px;
  font-weight: 800;

  /* عنوان Answer داخل UI */
  direction: ltr;
  text-align: left;
}

.answer-text{
  margin: 0;
  color: var(--muted);
  line-height: 1.6;
}

/* ========== Side Panel ========== */
.sidepanel{
  direction: rtl;
  text-align: right;

  border-radius: var(--radius);
  border: 1px solid var(--outline);
  background: var(--surface);
  box-shadow: var(--shadow);
  padding: 16px;
}

.row{
  display:flex;
  gap: 10px;
  align-items:center;
  flex-wrap: wrap;
}

/* Progress */
.progress{
  width: 100%;
  height: 10px;
  border-radius: 999px;
  border: 1px solid var(--outline);
  overflow:hidden;
  background: color-mix(in srgb, var(--surface-2) 75%, transparent);
}

.progress > div{
  height: 100%;
  width: 0%;
  background: color-mix(in srgb, var(--primary) 65%, var(--secondary));
}

.small{ color: var(--muted); font-size: 13px; }

/* ========== Orientation hint ========== */
.rotate-hint{
  margin: 12px 0;
  padding: 10px 12px;
  border: 1px dashed var(--outline);
  border-radius: 14px;
  background: color-mix(in srgb, var(--surface) 80%, transparent);
  color: var(--muted);
  direction: rtl;
  text-align: right;
}

/* ========== Mobile & Tablet responsive ========== */
@media (max-width: 900px){
  .question-box,
  .sidepanel{
    width: 100%;
  }

  .sidepanel .row{
    flex-wrap: wrap;
    gap: 10px;
  }

  .sidepanel .row .btn{
    flex: 1 1 120px;
    min-width: 120px;
  }

  #jump{
    width: 140px !important;
    max-width: 42vw;
  }
}

@media (max-width: 420px){
  .option{
    padding: 12px 12px;
    border-radius: 14px;
  }

  .q-meta{
    gap: 8px;
  }

  #qcount{
    font-size: 12px;
  }
}
